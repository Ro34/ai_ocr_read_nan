# AI OCR Read

Flutter å‰ç«¯ + Python FastAPI åç«¯ï¼ˆè§ `ocr_ai_backend/`ï¼‰ã€‚

å‰ç«¯æ”¯æŒæ‹ç…§ã€è°ƒç”¨åç«¯ OCR/VLM åˆ†æï¼Œå¹¶é€šè¿‡ Wiâ€‘Fi NAN å®éªŒåŠŸèƒ½åœ¨é™„è¿‘è®¾å¤‡é—´å¹¿æ’­åˆ†æç»“æœã€‚

## è¿è¡Œåç«¯ï¼ˆå¼€å‘ï¼‰

```bash
cd ocr_ai_backend
uv sync
# æ¨èï¼šç›‘å¬ 0.0.0.0ï¼Œä¾¿äºçœŸæœºè®¿é—®
uv run ocr-ai-backend
# æˆ–
uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

æœ¬æœºæµè§ˆå™¨å¯å¼€ http://127.0.0.1:8000/docsï¼›çœŸæœºè¯·è®¿é—®ä½ çš„ç”µè„‘ IPï¼Œæ¯”å¦‚ http://192.168.0.90:8000/docsã€‚

æç¤ºï¼š
- Android æ¨¡æ‹Ÿå™¨è®¿é—®å®¿ä¸»æœºè¯·ç”¨ `http://10.0.2.2:8000`
- iOS æ¨¡æ‹Ÿå™¨/æ¡Œé¢å¯ç”¨ `http://127.0.0.1:8000`
- çœŸæœºï¼šä½¿ç”¨ä½ çš„ç”µè„‘å±€åŸŸç½‘ IPï¼Œä¾‹å¦‚ `http://192.168.0.90:8000`
- åˆæ¬¡è°ƒç”¨ä¼šæ‡’åŠ è½½æ¨¡å‹ï¼Œç¨æ…¢ï¼›è‹¥ `torch/torchvision` å®‰è£…å¤±è´¥ï¼Œè¯·å‚ç…§ https://pytorch.org/ å•ç‹¬å®‰è£…ä¸ä½ å¹³å°åŒ¹é…çš„è½®å­

## è¿è¡Œå‰ç«¯

```bash
flutter pub get
flutter run
```

åœ¨é¦–é¡µä¸­ï¼š
- è®¾ç½®â€œåç«¯åœ°å€â€ï¼ˆé»˜è®¤å·²æŒ‰å¹³å°å¡«å¥½ï¼‰
- â€œæ‹ç…§â€åç‚¹å‡» â€œOCR è¯†åˆ«â€ æˆ– â€œVLM åˆ†æâ€ å³å¯è°ƒç”¨åç«¯

å¯é€‰ï¼šé…ç½®å¹¶å¯åŠ¨"é™„è¿‘ç›´è¿ï¼ˆNAN å®éªŒï¼‰"ï¼Œå¯åœ¨è®¾å¤‡é—´å¹¿æ’­åˆ†æç»“æœã€‚

## Wi-Fi Aware æ•°æ®è·¯å¾„åŠŸèƒ½ ğŸ†•

æœ¬é¡¹ç›®ç°å·²æ”¯æŒé€šè¿‡ Wi-Fi Aware Data Path ä¼ è¾“é•¿æ–‡æœ¬ï¼Œè§£å†³äº† NAN åè®®å‘ç°æ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼ˆçº¦ 255 å­—èŠ‚ï¼‰çš„é—®é¢˜ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **æ— é•¿åº¦é™åˆ¶**: é€šè¿‡æ•°æ®è·¯å¾„ä¼ è¾“ä»»æ„é•¿åº¦çš„æ–‡æœ¬
- âœ… **æ™ºèƒ½åˆ‡æ¢**: è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨æ™®é€šæ¶ˆæ¯è¿˜æ˜¯æ•°æ®è·¯å¾„
- âœ… **ç‚¹å¯¹ç‚¹è¿æ¥**: åŸºäº Socket çš„å¯é ä¼ è¾“
- âœ… **å¤šè®¾å¤‡æ”¯æŒ**: æ”¯æŒåŒæ—¶è¿æ¥å¤šä¸ª peer
- âœ… **å®Œæ•´æ–‡æ¡£**: æä¾›è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæµ‹è¯•æ¸…å•

### å¿«é€Ÿå¼€å§‹

1. **å‡†å¤‡ä¸¤å°æ”¯æŒ Wi-Fi Aware çš„ Android 10+ è®¾å¤‡**
   ```bash
   flutter run --release
   ```

2. **ä¸¤å°è®¾å¤‡åŒæ—¶æ“ä½œ**:
   - è®¾ç½®ç›¸åŒçš„æˆ¿é—´ç 
   - ç‚¹å‡»"å¯åŠ¨å‘å¸ƒ+è®¢é˜…"
   - ç­‰å¾…å‘ç°å¯¹æ–¹è®¾å¤‡ï¼ˆPeers > 0ï¼‰
   - ç‚¹å‡»"å»ºç«‹æ•°æ®è·¯å¾„"
   - æ‹ç…§è¯†åˆ«åç‚¹å‡»"å‘é€åˆ†æç»“æœ"

3. **æŸ¥çœ‹ä¼ è¾“æ•ˆæœ**:
   - å‘é€ç«¯æ˜¾ç¤º "æ•°æ®å·²å‘é€"
   - æ¥æ”¶ç«¯ NAN æ—¥å¿—æ˜¾ç¤ºæ”¶åˆ°å®Œæ•´æ–‡æœ¬

### æ–‡æ¡£æŒ‡å—

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [QUICK_START.md](QUICK_START.md) | å¿«é€Ÿæµ‹è¯•æŒ‡å— |
| [DATA_PATH_USAGE.md](DATA_PATH_USAGE.md) | å®Œæ•´ä½¿ç”¨æ‰‹å†Œ |
| [IMPLEMENTATION_CHECKLIST.md](IMPLEMENTATION_CHECKLIST.md) | å®ç°éªŒè¯æ¸…å• |
| [DATA_PATH_IMPLEMENTATION_SUMMARY.md](DATA_PATH_IMPLEMENTATION_SUMMARY.md) | æŠ€æœ¯æ€»ç»“ |
| [nan_data_link.md](nan_data_link.md) | æŠ€æœ¯èƒŒæ™¯åˆ†æ |

### ç³»ç»Ÿè¦æ±‚

- **Android**: 10+ (API 29)
- **ç¡¬ä»¶**: æ”¯æŒ Wi-Fi Aware/NAN
- **æƒé™**: ä½ç½®ã€é™„è¿‘è®¾å¤‡ã€Wi-Fi

### æŠ€æœ¯äº®ç‚¹

```dart
// æ™ºèƒ½è‡ªåŠ¨æ¨¡å¼ï¼šç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¼ è¾“æ–¹å¼
if (textSize > limit * 0.8 && _autoUseDataPath) {
  // è‡ªåŠ¨ä½¿ç”¨æ•°æ®è·¯å¾„ä¼ è¾“é•¿æ–‡æœ¬
  await _sendViaDataPath();
} else {
  // ä½¿ç”¨æ™®é€š NAN æ¶ˆæ¯
  await _sendNormalMessage();
}
```

### æ¨èè®¾å¤‡

- Google Pixel ç³»åˆ—
- Samsung Galaxy S9+
- åä¸º Mate 10+
- å…¶ä»–æ”¯æŒ Wi-Fi Aware çš„è®¾å¤‡

è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒ [QUICK_START.md](QUICK_START.md)ã€‚

